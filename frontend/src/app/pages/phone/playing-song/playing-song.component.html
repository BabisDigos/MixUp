<app-ph-navbar [page]="navState"></app-ph-navbar>

<div class="h-screen w-screen hide-scrollbar bg-blue-dark">
  <div class="w-full h-screen px-4">
    <div class="flex w-full items-center justify-between pt-8 pb-6 flex-cols-3">
      <div (click)="back()"><img src="assets/Icons-geo/arrow-left-2.svg" alt="" /></div>
      <div class="font-normal text-white text-[16px]">{{ song.album }}</div>
      <div><img src="assets/Icons-geo/more.svg" alt="" /></div>
    </div>

    <!-- Image -->
    <div *ngIf="!showLyrics" class="pt-4">
      <img
        *ngIf="song.image"
        class="object-fit w-full aspect-square rounded-[40px]"
        src="assets/images/songs/{{ song.image }}"
        alt=""
      />
    </div>

    <!-- Music info-->
    <div class="flex w-full justify-center pt-4">
      <div class="font-semibold text-white text-[24px] pb-2">{{ song.title }}</div>
    </div>
    <div class="flex w-full justify-center">
      <div class="font-regular text-white text-[16px]">{{ song.artist }}</div>
    </div>

    <!-- MusicTime-->
    <div class="w-full py-6 flex items-center justify-between text-white text-xs font-medium">
      <div class="w-10">{{ songTimeStart }}</div>
      <progress
        class="w-full h-[5px] self-center"
        [value]="songCurrentTime"
        [max]="song.duration ? song.duration * 60 : 0"
      ></progress>
      <div class="w-10 text-right">{{ songTimeEnd }}</div>
    </div>

    <!-- Buttons -->
    <div class="w-full h-[10vh] pb-4 flex flex-cols-5 justify-between items-center">
      <div>
        <img src="assets/Icons/RepeatNo.svg" alt="" />
      </div>
      <div>
        <img src="assets/Icons/Previous.svg" alt="" />
      </div>
      <div (click)="playSong()">
        <img *ngIf="isPlaying; else pause" class="w-[55px] h-[55px]" src="assets/Icons/Pause.svg" alt="" />
        <ng-template #pause>
          <img src="assets/Icons/Table/Play.svg" width="55px" height="55px" />
        </ng-template>
      </div>
      <div><img src="assets/Icons/Next.svg" alt="" /></div>
      <div class="relative" (click)="toggleWall()">
        <div
          *ngIf="wallIsOpen"
          class="absolute top-2 right-[2px] w-3 h-[1.5px] rounded-full bg-blue-light -rotate-45"
        ></div>
        <img src="assets/Icons/MirroringScreen.svg" alt="" />
      </div>
    </div>

    <!-- Lyrics -->
    <div
      *ngIf="!showLyrics; else lyricsOpen"
      class="hide-scrollbar h-[5vh] fixed bottom-0 left-4 right-4 bg-blue rounded-t-[40px] flex justify-center"
      (pointerenter)="toggleLyrics()"
    >
      <div class="absolute top-4 left-6">
        <p class="text-[16px] text-white font-medium">Lyrics</p>
      </div>
      <div>
        <hr class="w-[100px] border-[1px] mt-2 border-white/50 rounded-full" />
      </div>
    </div>

    <ng-template #lyricsOpen>
      <div class="overflow-hidden h-[50vh] bg-blue rounded-[40px] px-6 py-4">
        <div class="w-full flex justify-between items-center pb-4">
          <p class="text-white font-medium">Lyrics</p>
          <img (click)="toggleLyrics()" style="width: 32px" src="assets/Icons/Table/CloseCircle.svg" alt="" />
        </div>
        <div class="w-full h-full overflow-scroll">
          <div *ngFor="let lyric of lyrics" class="w-full">
            <div
              [ngStyle]="{ opacity: lyric.isActive ? '1' : '0.4' }"
              class="py-1 font-semibold text-[18px] leading-relaxed text-white"
            >
              {{ lyric.text }}
            </div>
          </div>
        </div>
      </div>
    </ng-template>
  </div>
</div>
